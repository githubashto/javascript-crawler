<html>
<head>

<script type="text/javascript"
	src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript">

/**
 * call back takes function sig like this
 * callback(status, longitude, latitude) 
 */
  function codeAddress(address, callback) {
    var geocoder = new google.maps.Geocoder();
    alert(address);
      geocoder.geocode( { 'address': address, 'language':'zh'}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var r = results[0];
            var lng = r.geometry.location.lng();
            var lat = r.geometry.location.lat();                
            if(callback){
                callback('ok', lng, lat);
            }      
        } else {
            if(callback){
                callback('failed-status-'+status);
            }
        }
      });
  }


function callback(a,b,c){
    if(a=='ok'){
    	console.log(a+'  '+b+'  '+c);
    }else{
    }
}

codeAddress('中国上海火车站', callback);
</script>
</head>
<body onload=>
<input type='text' id='address'></input>
<button onclick='codeAddress(); return false;'>getaddress</button>
</body>
</html>







<!--

<html>
<head>
<script src='http://ajax.googleapis.com/ajax/libs/ext-core/3.0.0/ext-core.js' type='text/javascript'></script>
<script>
	var baseurl = 'http://maps.google.com/maps/api/geocode/json?sensor=true&';
	function geocode(){		
		var obj = {
			url: baseurl+Ext.get('addr').getValue(),
			callback: function(r){
				console.log(r.responseText);
			}
		}
		Ext.Ajax.request(obj);
	}
</script>
</head>
<body>
<input type=text id='addr'>
<button onclick='geocode(); return false;'>geocode</button>
</body>
<html>		

-->