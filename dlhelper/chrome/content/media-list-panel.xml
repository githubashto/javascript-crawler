<?xml version="1.0"?>
<!-- *****************************************************************************
 *            Copyright (c) 2006-2009 Michel Gutierrez. All Rights Reserved.
 ****************************************************************************** -->
<!DOCTYPE bindings SYSTEM "chrome://dwhelper/locale/dwhelper.dtd" >

<bindings xmlns="http://www.mozilla.org/xbl"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:xbl="http://www.mozilla.org/xbl">

	<binding id="MediaListPanel" extends="widgets.xml#widget">

		<xbl:content xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
			<hbox flex="1">
				<vbox xbl-persist="medialist-sb:width" flex="0" width="300px">
					<MediaListMenu anonid="xMenu" flex="0"/>
					<MediaList anonid="xList" flex="1"/>
					<MediaListControl anonid="xControl" flex="0"/>
				</vbox>
				<splitter/>
				<browser anonid="xView" flex="1" width="100%" height="100%" 
					frameborder="0" xbl-persist="medialist-browser:width" >
				</browser>
			</hbox>
			<children style="display: none;"/>
		</xbl:content>

		<implementation>

			<constructor>
				<![CDATA[
setTimeout(function(_this) { _this.doMonitorXBLPersist=true; },0,this);
this.xControl.setView(this.xView);
this.xControl.setList(this.xList);
				]]>
			</constructor>

			<method name="updateControl">
				<body>
				<![CDATA[
var media=this.xList.getSelectedMedia();
var medias=this.xList.getSelectedMedias();
this.xControl.setSelection(media,medias);
				]]>
				</body>
			</method>


		</implementation>
		
		<handlers>

			<handler event="MediaListChange">
				<![CDATA[
this.xList.setList(this.xMenu.getList());
                ]]>
			</handler>

			<handler event="MediaSelect">
				<![CDATA[
this.updateControl();
				]]>
			</handler>

			<handler event="MediaDblClicked">
				<![CDATA[
this.updateControl();
this.xControl.watch();
				]]>
			</handler>
		</handlers>

	</binding>

</bindings>
